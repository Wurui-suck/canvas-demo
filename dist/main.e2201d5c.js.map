{"version":3,"sources":["main.js"],"names":["canvas","document","querySelector","width","documentElement","clientWidth","height","clientHeight","ctx","getContext","fillStyle","strokeStyle","lineCap","lineWidth","drawing1","drawing2","rubber1","rubber2","t","preventBehavior","e","preventDefault","addEventListener","passive","drawLine","x1","y1","x2","y2","beginPath","moveTo","lineTo","stroke","$button","colorPreview","colorRight","colorWrapper","style","transform","display","cssText","setTimeout","color","x3","x4","x5","x6","x7","x8","$","addClass","removeClass","colorArray","forEach","newColor","i","on","newArray","slice","splice","lineWidthMap","value","length","target","pen","classList","add","eraser","remove","lastX","lastY","DownOrStart","window","MouseOrTouch","UpOrEnd","X","Y","$eraser","restore","getImageData","clientX","targetTouches","clientY","left","top","clearRect","ClickSave","H","redo","arc","Math","PI","fill","putImageData","clear","save","url","toDataURL","a","createElement","body","appendChild","href","download","click"],"mappings":"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","file":"main.e2201d5c.js","sourceRoot":"..\\src","sourcesContent":["let canvas = document.querySelector('#canvas')\r\ncanvas.width = document.documentElement.clientWidth\r\ncanvas.height = document.documentElement.clientHeight - 50\r\nlet ctx = canvas.getContext('2d')\r\nctx.fillStyle = 'black'\r\nctx.strokeStyle = 'black'\r\nctx.lineCap = 'round'\r\nctx.lineWidth = '3'\r\nlet drawing1 = true\r\nlet drawing2\r\nlet rubber1\r\nlet rubber2\r\nlet t = 1.5\r\n//防止手机端滑动\r\nfunction preventBehavior(e) {\r\n    e.preventDefault();\r\n};\r\ndocument.addEventListener(\"touchmove\", preventBehavior, { passive: false }, false);\r\n//画线\r\nfunction drawLine(x1, y1, x2, y2) {\r\n    ctx.beginPath()\r\n    ctx.moveTo(x1, y1 - 50)\r\n    ctx.lineTo(x2, y2 - 50)\r\n    ctx.stroke()\r\n}\r\n\r\n//选色盘\r\nlet $button = document.querySelector('#button')\r\nlet colorPreview = document.querySelector('#color-preview')\r\nlet colorRight = document.querySelector('#color-right')\r\nlet colorWrapper = true\r\n$button.addEventListener('click', (e) => {\r\n    if (colorWrapper) {\r\n        $button.style.transform = 'rotate(180deg)'\r\n        colorPreview.style.display = 'none'\r\n        colorRight.style.cssText = \"border-top-left-radius:50% 5%;border-top-right-radius: 50% 5%;border-bottom-right-radius: 50% 5%;border-bottom-left-radius: 50% 5%;left:0\"\r\n        setTimeout(() => {\r\n            colorWrapper = false\r\n        })\r\n    }\r\n    if (colorWrapper === false) {\r\n        $button.style.transform = 'rotate(0deg)'\r\n        colorRight.style.cssText = 'left:100;border-top-right-radius:100% 10%;border - bottom - right - radius: 100 % 10 %'\r\n        colorPreview.style.display = 'flex'\r\n        colorWrapper = true\r\n    }\r\n\r\n})\r\n//选色\r\nfunction color(x1, x2, x3, x4, x5, x6, x7, x8) {\r\n    $(`#${x1}`).addClass('active')\r\n    $(`#${x2}`).removeClass('active')\r\n    $(`#${x3}`).removeClass('active')\r\n    $(`#${x4}`).removeClass('active')\r\n    $(`#${x5}`).removeClass('active')\r\n    $(`#${x6}`).removeClass('active')\r\n    $(`#${x7}`).removeClass('active')\r\n    $(`#${x8}`).removeClass('active')\r\n}\r\nlet colorArray = ['black', 'red', 'yellow', 'pink', 'green', 'blue', 'grey', 'brown']\r\ncolorArray.forEach((newColor, i) => {\r\n    $(`#${newColor}`).on('click',()=>{\r\n        let newArray=colorArray.slice(0)\r\n        newArray.splice(i,1)\r\n        color(newColor,newArray[0],newArray[1],newArray[2],newArray[3],newArray[4],newArray[5],newArray[6])\r\n        ctx.strokeStyle = newColor\r\n        ctx.fillStyle = newColor\r\n    })\r\n})\r\n\r\n\r\n//线宽\r\nconst lineWidthMap=[\r\n    {value:'1',lineWidth:'3',t:2},\r\n    {value:'2',lineWidth:'5',t:2.5},\r\n    {value:'3',lineWidth:'7',t:3.5},\r\n    {value:'4',lineWidth:'10',t:5}\r\n]\r\nlineWidth.addEventListener('input', (e) => {\r\n    for(let i=0;i<lineWidthMap.length;i++){\r\n       if(e.target.value===lineWidthMap[i].value){\r\n           ctx.lineWidth=lineWidthMap[i].lineWidth\r\n           t=lineWidthMap[i].t\r\n       }\r\n    }  \r\n})\r\n\r\n\r\n//笔\r\nlet pen = document.querySelector('#pen')\r\npen.addEventListener('click', () => {\r\n    pen.classList.add('active2')\r\n    eraser.classList.remove('active2')\r\n    drawing1 = true\r\n    rubber1 = false\r\n    rubber2 = false\r\n})\r\n//橡皮\r\nlet eraser = document.querySelector('#eraser')\r\neraser.addEventListener('click', () => {\r\n    eraser.classList.add('active2')\r\n    pen.classList.remove('active2')\r\n    drawing1 = false\r\n    rubber1 = true\r\n})\r\n\r\nlet lastX\r\nlet lastY\r\n\r\n//兼容移动端\r\nlet DownOrStart = ('ontouchstart' in window) ? 'touchstart' : 'mousedown'\r\nlet MouseOrTouch = ('ontouchmove' in window) ? 'touchmove' : 'mousemove'\r\nlet UpOrEnd = ('ontouchend' in window) ? 'touchend' : 'mouseup'\r\nlet X\r\nlet Y\r\nlet $eraser = document.querySelector('#eraser-wrapper')\r\nlet restore = [ctx.getImageData(0, 0, canvas.width, canvas.height)]\r\ncanvas.addEventListener(DownOrStart, (e) => {\r\n    if (drawing1) {\r\n        drawing2 = true\r\n        X = e.clientX || e.targetTouches[0].clientX\r\n        Y = e.clientY || e.targetTouches[0].clientY\r\n        lastX = X\r\n        lastY = Y\r\n    }\r\n    if (rubber1) {\r\n        rubber2 = true\r\n        X = e.clientX || e.targetTouches[0].clientX\r\n        Y = e.clientY || e.targetTouches[0].clientY\r\n        $eraser.style.display = 'block'\r\n        $eraser.style.left = X - 110 + 'px'\r\n        $eraser.style.top = Y - 58 + 'px'\r\n        ctx.clearRect(X - 10, Y - 61, 20, 20)\r\n    }\r\n})\r\nlet ClickSave = ('ontouchmove' in window) ? true : false\r\nlet H\r\ncanvas.addEventListener(MouseOrTouch, (e) => {\r\n    if (ClickSave === true) {\r\n        H = false\r\n    }\r\n\r\n    if (drawing2) {\r\n        X = e.clientX || e.targetTouches[0].clientX\r\n        Y = e.clientY || e.targetTouches[0].clientY\r\n\r\n        drawLine(lastX, lastY, X, Y)\r\n        lastX = X\r\n        lastY = Y\r\n    }\r\n    if (rubber2) {\r\n        X = e.clientX || e.targetTouches[0].clientX\r\n        Y = e.clientY || e.targetTouches[0].clientY\r\n        $eraser.style.display = 'block'\r\n        $eraser.style.left = X - 110 + 'px'\r\n        $eraser.style.top = Y - 58 + 'px'\r\n        ctx.clearRect(X - 10, Y - 61, 20, 20)\r\n    }\r\n})\r\n\r\n$eraser.addEventListener(UpOrEnd, (e) => {\r\n    rubber2 = false\r\n    $eraser.style.display = 'none'\r\n    if (restore.length > 0) {\r\n        redo.style.color = 'black'\r\n    } if (ClickSave === false) {\r\n        setTimeout(() => {\r\n            restore[restore.length] = ctx.getImageData(0, 0, canvas.width, canvas.height)\r\n        })\r\n    }\r\n    if (ClickSave === true && H === false) {\r\n        setTimeout(() => {\r\n            restore[restore.length] = ctx.getImageData(0, 0, canvas.width, canvas.height)\r\n            H = true\r\n        })\r\n    }\r\n})\r\n\r\ncanvas.addEventListener('click', (e) => {\r\n    if (drawing1) {\r\n        let X = e.clientX || e.targetTouches[0].clientX\r\n        let Y = e.clientY || e.targetTouches[0].clientY\r\n        ctx.beginPath()\r\n        ctx.arc(X, Y - 50, t, 0, 2 * Math.PI)\r\n        ctx.fill()\r\n    }\r\n    if (ClickSave === true) {\r\n        setTimeout(() => {\r\n            restore[restore.length] = ctx.getImageData(0, 0, canvas.width, canvas.height)\r\n        })\r\n    }\r\n})\r\n\r\ncanvas.addEventListener(UpOrEnd, (e) => {\r\n    drawing2 = false\r\n    $eraser.style.display = 'none'\r\n    if (restore.length > 0) {\r\n        redo.style.color = 'black'\r\n    }\r\n    if (ClickSave === false) {\r\n        setTimeout(() => {\r\n            restore[restore.length] = ctx.getImageData(0, 0, canvas.width, canvas.height)\r\n        })\r\n    }\r\n    if (ClickSave === true && H === false) {\r\n        setTimeout(() => {\r\n            restore[restore.length] = ctx.getImageData(0, 0, canvas.width, canvas.height)\r\n            H = true\r\n        })\r\n    }\r\n}\r\n)\r\n\r\n//撤回\r\nredo.addEventListener('click', (e) => {\r\n    if (restore.length > 1) {\r\n        ctx.putImageData(restore[restore.length - 2], 0, 0)\r\n        restore.length--\r\n\r\n    } if (restore.length <= 1) {\r\n        redo.style.color = 'grey'\r\n    }\r\n})\r\n\r\n//清除\r\nclear.addEventListener('click', () => {\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n    restore.length = 1\r\n    redo.style.color = 'grey'\r\n})\r\n\r\n//保存\r\nsave.addEventListener('click', () => {\r\n    let url = canvas.toDataURL(\"image/png\")\r\n    let a = document.createElement('a')\r\n    document.body.appendChild(a)\r\n    a.href = url\r\n    a.download = '我的作品'\r\n    a.target = '_blank'\r\n    a.click()\r\n})"]}